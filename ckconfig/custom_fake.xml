<clickhouse>
    <access_control_path>/data01/clickhouse/access/</access_control_path>
    <asynchronous_metric_log>
        <flush_interval_milliseconds>30000</flush_interval_milliseconds>
        <partition_by>toYYYYMMDD(event_date)</partition_by>
        <ttl>event_date + INTERVAL 30 DAY DELETE</ttl>
    </asynchronous_metric_log>
    <backups>
        <allowed_disk>hdfs1</allowed_disk>
        <allowed_disk>s3</allowed_disk>
    </backups>
    <database_atomic_delay_before_drop_table_sec>0</database_atomic_delay_before_drop_table_sec>
    <default_replica_name>{replica}</default_replica_name>
    <default_replica_path>/clickhouse/tables/{cluster}/{database}/{table}/{shard}</default_replica_path>
    <distributed_ddl>
        <path>/clickhouse/task_queue/ddl/abc</path>
    </distributed_ddl>
    <format_schema_path>/data01/clickhouse/format_schemas/</format_schema_path>
    <listen_host>::</listen_host>
    <logger>
        <errorlog>/home/eoi/clickhouse/log/clickhouse-server/clickhouse-server.err.log</errorlog>
        <level>information</level>
        <log>/home/eoi/clickhouse/log/clickhouse-server/clickhouse-server.log</log>
    </logger>
    <max_concurrent_queries>100</max_concurrent_queries>
    <max_concurrent_select_queries>90</max_concurrent_select_queries>
    <max_partition_size_to_drop>0</max_partition_size_to_drop>
    <max_table_size_to_drop>0</max_table_size_to_drop>
    <merge_tree>
        <allow_floating_point_partition_key>0</allow_floating_point_partition_key>
        <allow_remote_fs_zero_copy_replication>1</allow_remote_fs_zero_copy_replication>
        <check_sample_column_is_correct>true</check_sample_column_is_correct>
        <inactive_parts_to_delay_insert>0</inactive_parts_to_delay_insert>
        <inactive_parts_to_throw_insert>0</inactive_parts_to_throw_insert>
        <max_bytes_to_merge_at_max_space_in_pool>161061273600</max_bytes_to_merge_at_max_space_in_pool>
        <max_bytes_to_merge_at_min_space_in_pool>1048576</max_bytes_to_merge_at_min_space_in_pool>
        <max_delay_to_insert>1</max_delay_to_insert>
        <max_part_loading_threads>auto</max_part_loading_threads>
        <max_partitions_to_read>-1</max_partitions_to_read>
        <max_parts_in_total>100000</max_parts_in_total>
        <max_suspicious_broken_parts>5</max_suspicious_broken_parts>
        <merge_max_block_size>8192</merge_max_block_size>
        <non_replicated_deduplication_window>0</non_replicated_deduplication_window>
        <old_parts_lifetime>480</old_parts_lifetime>
        <parts_to_delay_insert>150</parts_to_delay_insert>
        <parts_to_throw_insert>300</parts_to_throw_insert>
        <replicated_deduplication_window>100</replicated_deduplication_window>
        <replicated_deduplication_window_seconds>604800</replicated_deduplication_window_seconds>
        <replicated_fetches_http_connection_timeout>0</replicated_fetches_http_connection_timeout>
        <replicated_fetches_http_receive_timeout>0</replicated_fetches_http_receive_timeout>
        <replicated_fetches_http_send_timeout>0</replicated_fetches_http_send_timeout>
    </merge_tree>
    <metric_log>
        <flush_interval_milliseconds>30000</flush_interval_milliseconds>
        <partition_by>toYYYYMMDD(event_date)</partition_by>
        <ttl>event_date + INTERVAL 30 DAY DELETE</ttl>
    </metric_log>
    <part_log>
        <flush_interval_milliseconds>30000</flush_interval_milliseconds>
        <partition_by>toYYYYMMDD(event_date)</partition_by>
        <ttl>event_date + INTERVAL 30 DAY DELETE</ttl>
    </part_log>
    <path>/data01/clickhouse/</path>
    <prometheus>
        <asynchronous_metrics>true</asynchronous_metrics>
        <endpoint>/metrics</endpoint>
        <events>true</events>
        <metrics>true</metrics>
        <port>9363</port>
        <status_info>true</status_info>
    </prometheus>
    <query_log>
        <flush_interval_milliseconds>30000</flush_interval_milliseconds>
        <partition_by>toYYYYMMDD(event_date)</partition_by>
        <ttl>event_date + INTERVAL 30 DAY DELETE</ttl>
    </query_log>
    <query_thread_log>
        <flush_interval_milliseconds>30000</flush_interval_milliseconds>
        <partition_by>toYYYYMMDD(event_date)</partition_by>
        <ttl>event_date + INTERVAL 30 DAY DELETE</ttl>
    </query_thread_log>
    <query_views_log>
        <flush_interval_milliseconds>30000</flush_interval_milliseconds>
        <partition_by>toYYYYMMDD(event_date)</partition_by>
        <ttl>event_date + INTERVAL 30 DAY DELETE</ttl>
    </query_views_log>
    <storage_configuration>
        <disks>
            <hdfs1>
                <endpoint>localhost:8020/admin/abc</endpoint>
                <type>hdfs</type>
            </hdfs1>
            <s3>
                <access_key_id>123456</access_key_id>
                <cache_path>/var/lib/clickhouse/disks/s3/cache/</cache_path>
                <endpoint>localhost:1200/var/s3</endpoint>
                <retry_attempts>10</retry_attempts>
                <secret_access_key>654321</secret_access_key>
                <skip_access_check>false</skip_access_check>
                <type>s3</type>
            </s3>
            <ssd>
                <keep_free_space_bytes>1024</keep_free_space_bytes>
                <path>/data01/clickhouse</path>
                <type>local</type>
            </ssd>
        </disks>
        <policies>
            <hdfs_only>
                <move_factor>0.3</move_factor>
                <volumes>
                    <main>
                        <disk>hdfs1</disk>
                        <max_data_part_size_bytes>1000000</max_data_part_size_bytes>
                    </main>
                </volumes>
            </hdfs_only>
            <default>
                <volumes>
                    <hot>
                        <disk>ssd</disk>
                    </hot>
                    <cold>
                        <disk>ssd2</disk>
                    </cold>
                </volumes>
            </default>
            <s3_only>
                <volumes>
                    <replica>
                        <disk>s3</disk>
                    </replica>
                </volumes>
            </s3_only>
        </policies>
    </storage_configuration>
    <tcp_port>9000</tcp_port>
    <tmp_path>/data01/clickhouse/tmp/</tmp_path>
    <trace_log>
        <flush_interval_milliseconds>30000</flush_interval_milliseconds>
        <partition_by>toYYYYMMDD(event_date)</partition_by>
        <ttl>event_date + INTERVAL 30 DAY DELETE</ttl>
    </trace_log>
    <user_directories>
        <local_directory>
            <path>/data01/clickhouse/access/</path>
        </local_directory>
    </user_directories>
    <user_files_path>/data01/clickhouse/user_files/</user_files_path>
</clickhouse>
