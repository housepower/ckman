(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6da35b69"],{6201:function(e,t,n){"use strict";var a=n("eef7"),r=n.n(a);r.a},"670c":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",{staticClass:"home-package"},[n("breadcrumb",{attrs:{data:["package"]}}),n("section",{staticClass:"rpms"},[n("el-divider",{attrs:{"content-position":"left"}},[e._v(e._s(e.$t("homePackage.ClickHouse RPMs")))]),n("rpm-list")],1)],1)},r=[],o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"rpms text-right"},[n("el-button",{staticClass:"mb-15",attrs:{type:"primary"},on:{click:e.chooseFile}},[e._v(e._s(e.$t("homePackage.Upload RPMs")))]),n("el-table",{attrs:{data:e.list,border:""}},[n("el-table-column",{attrs:{prop:"version","show-overflow-tooltip":"",label:e.$t("common.Version"),align:"center"}}),n("el-table-column",{attrs:{prop:"files","show-overflow-tooltip":"",label:e.$t("common.Files"),align:"left","min-width":"500"}}),n("el-table-column",{attrs:{label:e.$t("common.Action"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[[n("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Delete",expression:"'Delete'"}],staticClass:"fa fa-trash pointer fs-18",on:{click:function(t){return e.remove(a)}}})]]}}])})],1)],1)},c=[],i=n("a34a"),s=n.n(i),l=n("c949"),u=n("08ba"),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("el-upload",{staticClass:"width-full",attrs:{action:"void",multiple:"","auto-upload":!1,"file-list":e.fileList,"on-change":e.changeFile,"on-remove":e.removeFile,accept:".rpm"}},[n("el-button",{staticClass:"mb-15",attrs:{type:"primary"}},[e._v(e._s(e.$t("homePackage.Upload RPMs")))])],1),e.uploadPercent>0?n("el-progress",{attrs:{"text-inside":!0,"stroke-width":15,percentage:e.uploadPercent}}):e._e()],1)},m=[];function f(e,t,n,a,r,o,c){try{var i=e[o](c),s=i.value}catch(l){return void n(l)}i.done?t(s):Promise.resolve(s).then(a,r)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function c(e){f(o,a,r,c,i,"next",e)}function i(e){f(o,a,r,c,i,"throw",e)}c(void 0)}))}}var d={data:function(){return{fileList:[],uploadPercent:0}},mounted:function(){},methods:{changeFile:function(){this.fileList=arguments.length<=1?void 0:arguments[1]},removeFile:function(){this.fileList=arguments.length<=1?void 0:arguments[1]},onOk:function(){var e=this;return h(s.a.mark((function t(){var n;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.fileList.length){t.next=7;break}return n=e.fileList.map((function(t){var n=new FormData;return n.append("package",t.raw),l["d"].upload(n,{onUploadProgress:function(t){var n=0|Math.floor(t.loaded/t.total*100);e.uploadPercent=n}})})),t.next=4,Promise.all(n);case 4:e.$message.success("rpm包上传成功"),t.next=9;break;case 7:return e.$message.warning("请选取文件"),t.abrupt("return",Promise.reject());case 9:case"end":return t.stop()}}),t)})))()}}},v=d,w=n("2877"),g=Object(w["a"])(v,p,m,!1,null,null,null),k=g.exports;function x(e,t,n,a,r,o,c){try{var i=e[o](c),s=i.value}catch(l){return void n(l)}i.done?t(s):Promise.resolve(s).then(a,r)}function b(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function c(e){x(o,a,r,c,i,"next",e)}function i(e){x(o,a,r,c,i,"throw",e)}c(void 0)}))}}var P={data:function(){return{list:[]}},mounted:function(){this.fetchData()},methods:{fetchData:function(){var e=this;return b(s.a.mark((function t(){var n,a;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.list=[],t.next=3,l["d"].getList();case 3:n=t.sent,a=n.data.entity,a.forEach((function(t){e.list.push({version:t,files:"clickhouse-client-".concat(t,"-2.noarch.rpm,clickhouse-common-static-").concat(t,"-2.x86_64.rpm,clickhouse-server-").concat(t,"-2.noarch.rpm")})}));case 6:case"end":return t.stop()}}),t)})))()},chooseFile:function(){var e=this;return b(s.a.mark((function t(){return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["d"])({props:{title:e.$t("common.Upload File"),width:"650px",cancelText:e.$t("common.Cancel"),okText:e.$t("common.Upload")},component:k});case 2:e.fetchData();case 3:case"end":return t.stop()}}),t)})))()},remove:function(e){var t=this;return b(s.a.mark((function n(){return s.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$confirm("Confirm whether to delete ?","Tip",{confirmButtonText:t.$t("common.Delete"),cancelButtonText:t.$t("common.Cancel"),text:"warning"});case 2:return n.next=4,l["d"].deletePackage({packageVersion:e.version});case 4:t.$message.success("".concat(e.version,"版本已删除成功")),t.fetchData();case 6:case"end":return n.stop()}}),n)})))()}}},$=P,_=Object(w["a"])($,o,c,!1,null,null,null),C=_.exports,y={name:"homePackage",data:function(){return{formModel:{}}},components:{RpmList:C}},F=y,D=(n("6201"),Object(w["a"])(F,a,r,!1,null,"5231d700",null));t["default"]=D.exports},eef7:function(e,t,n){}}]);