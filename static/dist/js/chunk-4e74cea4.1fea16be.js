(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e74cea4"],{"63bd":function(t,e,s){"use strict";var n=s("7c27"),a=s.n(n);a.a},"7c27":function(t,e,s){},"93f9":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"layout flex flex-column overflow-hidden"},[s("header",{staticClass:"flex-between flex-vcenter plr-20"},[s("router-link",{staticClass:"fs-18 font-bold",attrs:{to:"/"}},[t._v(t._s(t.title)+" "+t._s(t.version))]),s("div",{staticClass:"header-right flex flex-vcenter"},[s("div",{staticClass:"flex flex-vcenter mr-15 pointer",on:{click:t.viewTaskList}},[s("i",{staticClass:"el-icon-bell fs-20 mr-5"}),s("span",{staticClass:"fs-16"},[t._v(t._s(t.$t("layout.Message Center")))]),s("el-badge",{attrs:{"is-dot":""}})],1),s("a",{staticClass:"flex flex-vcenter mr-15 pointer",attrs:{href:"https://github.com/housepower/ckman/blob/main/docs/ckman_v2.0.0.md",target:"_blank"}},[s("i",{staticClass:"fa fa-book fs-20 mr-5",attrs:{"aria-hidden":"true"}}),s("span",{staticClass:"fs-16"},[t._v(t._s(t.$t("layout.Document")))])]),s("router-link",{staticClass:"fa fa-file-text-o fs-20 mr-15",attrs:{to:"/swagger/index.html",target:"_blank"}},[s("span",{staticClass:"fs-16 ml-5"},[t._v(t._s(t.$t("layout.API")))])]),s("el-dropdown",{staticClass:"pointer"},[s("div",{staticClass:"flex flex-vcenter"},[s("i",{staticClass:"fa fa-user-o fs-20"}),s("span",{staticClass:"fs-16 ml-5 user",domProps:{textContent:t._s(t.user)}})]),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{nativeOn:{click:function(e){return t.logout(e)}}},[t._v(t._s(t.$t("common.Logout")))])],1)],1),s("router-link",{staticClass:"fa fa-gear fs-20 pointer ml-15",attrs:{to:"/setting"}},[s("span",{staticClass:"fs-16 ml-5"},[t._v(t._s(t.$t("layout.Settings")))])]),s("el-select",{staticClass:"ml-10 width-100",attrs:{size:"mini"},model:{value:t.$i18n.locale,callback:function(e){t.$set(t.$i18n,"locale",e)},expression:"$i18n.locale"}},[s("el-option",{attrs:{value:"en",label:"English"}}),s("el-option",{attrs:{value:"zh",label:"中文"}})],1)],1)],1),s("main",{staticClass:"plr-20 pt-10 flex-1",staticStyle:{overflow:"auto"}},[s("router-view")],1),s("transition",{attrs:{name:"el-fade-in-linear",appear:""}},[t.$route.params.id?s("footer",{staticClass:"flex-center width-full"},[s("div",{staticClass:"flex-center list-content width-1000"},t._l(t.menus,(function(e){return s("a",{key:e.name,staticClass:"flex flex-1 flex-center height-full pointer",class:{"router-active":t.currentMenu===e.path,"list-item":"Settings"!==e.name||"deploy"===t.mode},attrs:{href:"javascript:void(0)"},on:{click:function(s){return t.handleMenuClick(e,s)}}},[s("span",{staticClass:"fs-20"},[t._v(t._s(t.$t("home."+e.name))),s("span",{staticStyle:{display:"none"}},[t._v(t._s(t.currentMenu)+" "+t._s(e.path))])])])})),0)]):t._e()])],1)},a=[],r=s("a34a"),i=s.n(r),o=s("8f12"),l=s("c949");function c(t,e,s,n,a,r,i){try{var o=t[r](i),l=o.value}catch(c){return void s(c)}o.done?e(l):Promise.resolve(l).then(n,a)}function u(t){return function(){var e=this,s=arguments;return new Promise((function(n,a){var r=t.apply(e,s);function i(t){c(r,n,a,i,o,"next",t)}function o(t){c(r,n,a,i,o,"throw",t)}i(void 0)}))}}var f={name:"Layout",data:function(){return{menus:o["d"],user:"",version:"",mode:"",currentMenu:"",timerId:null,taskNum:null}},mounted:function(){this.user=JSON.parse(localStorage.getItem("user")||"{}").username,this.fetchVersion()},created:function(){this.onChangeCluster()},methods:{onChangeCluster:function(){var t=this;return u(i.a.mark((function e(){var s,n,a,r,o;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(s=t.$route.path,t.currentMenu=s.split("/").lastItem,n=t.$route.params.id,n){e.next=5;break}return e.abrupt("return",!1);case 5:return e.next=7,l["a"].getCluster();case 7:a=e.sent,r=a.data.entity,o=r[n].mode,t.mode=o;case 11:case"end":return e.stop()}}),e)})))()},handleMenuClick:function(t){var e=this;return u(i.a.mark((function s(){return i.a.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if("Settings"!==t.name){s.next=4;break}if("import"!==e.mode){s.next=4;break}return e.$message.warning(e.$t("home.The imported cluster does not support editing")),s.abrupt("return");case 4:e.$route.name!=t.name&&(e.$router.push({path:t.path}),e.currentMenu=t.path.split("/").lastItem);case 5:case"end":return s.stop()}}),s)})))()},logout:function(){localStorage.removeItem("user"),this.$message.success(this.$t("layout.Logout Success")),this.$router.push("/login")},fetchVersion:function(){var t=this;return u(i.a.mark((function e(){var s,n;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l["d"].getVersion();case 2:s=e.sent,n=s.data.entity,t.version=n;case 5:case"end":return e.stop()}}),e)})))()},viewTaskList:function(){this.$router.push({name:"TaskList"})}},watch:{$route:{handler:function(t,e){this.menus="loader"===t.meta?o["c"]:o["d"],this.onChangeCluster()},immediate:!0},"$i18n.locale":function(t){localStorage.setItem("locale",t),document.title=this.title,document.documentElement.lang=t}},computed:{title:function(){return this.$t("layout.ClickHouse Management Console")}}},m=f,d=(s("63bd"),s("2877")),p=Object(d["a"])(m,n,a,!1,null,"3d3ba488",null);e["default"]=p.exports}}]);