(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-145edd8d"],{7115:function(t,e,n){},"93f9":function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"layout flex flex-column overflow-hidden"},[n("header",{staticClass:"flex-between flex-vcenter plr-20"},[n("router-link",{staticClass:"fs-18 font-bold",attrs:{to:"/"}},[t._v(t._s(t.title)+" "+t._s(t.version))]),n("div",{staticClass:"header-right flex flex-vcenter"},[n("div",{staticClass:"flex flex-vcenter mr-15 pointer",on:{click:t.viewTaskList}},[n("i",{staticClass:"el-icon-bell fs-20 mr-5"}),n("span",{staticClass:"fs-16"},[t._v(t._s(t.$t("common.Message Center")))]),n("el-badge",{attrs:{"is-dot":""}})],1),n("el-dropdown",{staticClass:"pointer"},[n("div",{staticClass:"flex flex-vcenter"},[n("i",{staticClass:"fa fa-user-o fs-20"}),n("span",{staticClass:"fs-16 ml-5 user",domProps:{textContent:t._s(t.user)}})]),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{nativeOn:{click:function(e){return t.logout(e)}}},[t._v(t._s(t.$t("common.Logout")))])],1)],1),n("router-link",{staticClass:"fa fa-gear fs-20 pointer ml-15",attrs:{to:"/setting"}},[n("span",{staticClass:"fs-16 ml-5"},[t._v(t._s(t.$t("layout.Settings")))])]),n("el-select",{staticClass:"ml-10 width-100",attrs:{size:"mini"},model:{value:t.$i18n.locale,callback:function(e){t.$set(t.$i18n,"locale",e)},expression:"$i18n.locale"}},[n("el-option",{attrs:{value:"en",label:"English"}}),n("el-option",{attrs:{value:"zh",label:"中文"}})],1)],1)],1),n("main",{staticClass:"plr-20 pt-10 flex-1",staticStyle:{overflow:"auto"}},[n("router-view")],1),n("transition",{attrs:{name:"el-fade-in-linear",appear:""}},[t.$route.params.id?n("footer",{staticClass:"flex-center width-full"},[n("div",{staticClass:"flex-center list-content width-1000"},t._l(t.menus,(function(e){return n("a",{key:e.name,staticClass:"flex flex-1 flex-center height-full pointer",class:{"router-active":t.currentMenu===e.path,"list-item":"Settings"!==e.name||"deploy"===t.mode},attrs:{href:"javascript:void(0)"},on:{click:function(n){return t.handleMenuClick(e,n)}}},[n("span",{staticClass:"fs-20"},[t._v(t._s(t.$t("home."+e.name))),n("span",{staticStyle:{display:"none"}},[t._v(t._s(t.currentMenu)+" "+t._s(e.path))])])])})),0)]):t._e()])],1)},a=[],r=n("a34a"),i=n.n(r),o=n("8f12"),l=n("c949");function u(t,e,n,s,a,r,i){try{var o=t[r](i),l=o.value}catch(u){return void n(u)}o.done?e(l):Promise.resolve(l).then(s,a)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(s,a){var r=t.apply(e,n);function i(t){u(r,s,a,i,o,"next",t)}function o(t){u(r,s,a,i,o,"throw",t)}i(void 0)}))}}var f={name:"Layout",data:function(){return{menus:o["d"],user:"",version:"",mode:"",currentMenu:"",timerId:null,taskNum:null}},mounted:function(){this.user=JSON.parse(localStorage.getItem("user")||"{}").username,this.fetchVersion()},created:function(){this.onChangeCluster()},methods:{onChangeCluster:function(){var t=this;return c(i.a.mark((function e(){var n,s,a,r,o;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.$route.path,t.currentMenu=n.split("/").lastItem,s=t.$route.params.id,s){e.next=5;break}return e.abrupt("return",!1);case 5:return e.next=7,l["a"].getCluster();case 7:a=e.sent,r=a.data.entity,o=r[s].mode,t.mode=o;case 11:case"end":return e.stop()}}),e)})))()},handleMenuClick:function(t){var e=this;return c(i.a.mark((function n(){return i.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("Settings"!==t.name){n.next=4;break}if("import"!==e.mode){n.next=4;break}return e.$message.warning(e.$t("home.The imported cluster does not support editing")),n.abrupt("return");case 4:e.$route.name!=t.name&&(e.$router.push({path:t.path}),e.currentMenu=t.path.split("/").lastItem);case 5:case"end":return n.stop()}}),n)})))()},logout:function(){localStorage.removeItem("user"),this.$message.success(this.$t("layout.Logout Success")),this.$router.push("/login")},fetchVersion:function(){var t=this;return c(i.a.mark((function e(){var n,s;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l["d"].getVersion();case 2:n=e.sent,s=n.data.entity,t.version=s;case 5:case"end":return e.stop()}}),e)})))()},viewTaskList:function(){this.$router.push({name:"TaskList"})}},watch:{$route:{handler:function(t,e){this.menus="loader"===t.meta?o["c"]:o["d"],this.onChangeCluster()},immediate:!0},"$i18n.locale":function(t){localStorage.setItem("locale",t),document.title=this.title,document.documentElement.lang=t}},computed:{title:function(){return this.$t("layout.ClickHouse Management Console")}}},d=f,m=(n("f520"),n("2877")),p=Object(m["a"])(d,s,a,!1,null,"44c61cb5",null);e["default"]=p.exports},f520:function(t,e,n){"use strict";var s=n("7115"),a=n.n(s);a.a}}]);