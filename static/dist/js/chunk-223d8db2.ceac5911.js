(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-223d8db2"],{"670c":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",{staticClass:"home-package"},[n("breadcrumb",{attrs:{data:["package"]}}),n("section",{staticClass:"pkgs"},[n("el-divider",{attrs:{"content-position":"left"}},[e._v(e._s(e.$t("homePackage.ClickHouse Packages")))]),n("pkg-list")],1)],1)},o=[],r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"pkgs text-right"},[n("el-button",{staticClass:"mb-15",attrs:{type:"primary"},on:{click:e.chooseFile}},[e._v(e._s(e.$t("homePackage.Upload Packages")))]),n("el-table",{attrs:{data:e.list,border:""}},[n("el-table-column",{attrs:{prop:"version","show-overflow-tooltip":"",label:e.$t("common.Version"),align:"center"}}),n("el-table-column",{attrs:{prop:"pkgType","show-overflow-tooltip":"",label:e.$t("common.Package Type"),align:"center"}}),n("el-table-column",{attrs:{prop:"pkgName","show-overflow-tooltip":"",label:e.$t("common.Files"),align:"left","min-width":"500"}}),n("el-table-column",{attrs:{label:e.$t("common.Action"),align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[[n("i",{directives:[{name:"tooltip",rawName:"v-tooltip",value:"Delete",expression:"'Delete'"}],staticClass:"fa fa-trash pointer fs-18",on:{click:function(t){return e.remove(a)}}})]]}}])})],1)],1)},c=[],i=n("a34a"),s=n.n(i),l=n("c949"),u=n("08ba"),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("el-upload",{staticClass:"width-full",attrs:{action:"void",multiple:"","auto-upload":!1,"file-list":e.fileList,"on-change":e.changeFile,"on-remove":e.removeFile,accept:".rpm, .deb, .tgz"}},[n("el-button",{staticClass:"mb-15",attrs:{type:"primary"}},[e._v(e._s(e.$t("homePackage.Upload Packages")))])],1),e.uploadPercent>0?n("el-progress",{attrs:{"text-inside":!0,"stroke-width":15,percentage:e.uploadPercent}}):e._e()],1)},m=[];function f(e,t,n,a,o,r,c){try{var i=e[r](c),s=i.value}catch(l){return void n(l)}i.done?t(s):Promise.resolve(s).then(a,o)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(a,o){var r=e.apply(t,n);function c(e){f(r,a,o,c,i,"next",e)}function i(e){f(r,a,o,c,i,"throw",e)}c(void 0)}))}}var h={data:function(){return{fileList:[],uploadPercent:0}},mounted:function(){},methods:{changeFile:function(){this.fileList=arguments.length<=1?void 0:arguments[1]},removeFile:function(){this.fileList=arguments.length<=1?void 0:arguments[1]},onOk:function(){var e=this;return d(s.a.mark((function t(){var n;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.fileList.length){t.next=7;break}return n=e.fileList.map((function(t){var n=new FormData;return n.append("package",t.raw),l["d"].upload(n,{onUploadProgress:function(t){var n=0|Math.floor(t.loaded/t.total*100);e.uploadPercent=n}})})),t.next=4,Promise.all(n);case 4:e.$message.success("安装包上传成功"),t.next=9;break;case 7:return e.$message.warning("请选取文件"),t.abrupt("return",Promise.reject());case 9:case"end":return t.stop()}}),t)})))()}}},v=h,g=n("2877"),w=Object(g["a"])(v,p,m,!1,null,null,null),k=w.exports;function b(e,t,n,a,o,r,c){try{var i=e[r](c),s=i.value}catch(l){return void n(l)}i.done?t(s):Promise.resolve(s).then(a,o)}function x(e){return function(){var t=this,n=arguments;return new Promise((function(a,o){var r=e.apply(t,n);function c(e){b(r,a,o,c,i,"next",e)}function i(e){b(r,a,o,c,i,"throw",e)}c(void 0)}))}}var $={data:function(){return{list:[]}},mounted:function(){this.fetchData()},methods:{fetchData:function(){var e=this;return x(s.a.mark((function t(){var n,a;return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.list=[],t.next=3,l["d"].getList("all");case 3:n=t.sent,a=n.data.entity,e.list=a;case 6:case"end":return t.stop()}}),t)})))()},chooseFile:function(){var e=this;return x(s.a.mark((function t(){return s.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["d"])({props:{title:e.$t("common.Upload File"),width:"650px",cancelText:e.$t("common.Cancel"),okText:e.$t("common.Upload")},component:k});case 2:e.fetchData();case 3:case"end":return t.stop()}}),t)})))()},remove:function(e){var t=this;return x(s.a.mark((function n(){return s.a.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.$confirm("Confirm whether to delete ?","Tip",{confirmButtonText:t.$t("common.Delete"),cancelButtonText:t.$t("common.Cancel"),text:"warning"});case 2:return n.next=4,l["d"].deletePackage({packageVersion:e.version,pkgType:e.pkgType});case 4:t.$message.success("".concat(e.version," ").concat(t.$t("common.Version")," ").concat(t.$t("common.Delete")," ").concat(t.$t("common.Success"))),t.fetchData();case 6:case"end":return n.stop()}}),n)})))()}}},P=$,y=Object(g["a"])(P,r,c,!1,null,null,null),_=y.exports,C={name:"homePackage",data:function(){return{formModel:{}}},components:{PkgList:_}},D=C,F=(n("9528"),Object(g["a"])(D,a,o,!1,null,"4f989f98",null));t["default"]=F.exports},9528:function(e,t,n){"use strict";var a=n("dbc9"),o=n.n(a);o.a},dbc9:function(e,t,n){}}]);