(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-575b9f92"],{ce2f:function(e,t,s){"use strict";var n=s("fb6e"),i=s.n(n);i.a},fb1a:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("main",{staticClass:"settings"},[s("breadcrumb",{attrs:{data:["Clusters",e.$route.params.id,"session"]}}),s("section",{staticClass:"container"},[s("div",{staticClass:"total flex flex-end pb-10 flex-vcenter"}),s("div",{staticClass:"tables"},[s("h3",{staticClass:"mb-10"},[e._v(e._s(e.$t("session.Open Sessions")))]),s("session-table",{attrs:{list:e.openList}}),s("div",{staticClass:"mb-10 mt-50",staticStyle:{overflow:"hidden"}},[s("div",{staticClass:"fs-18 font-bold pull-left"},[e._v(e._s(e.$t("session.Slow Sessions")))]),s("div",{staticClass:"pull-right"},[s("time-filter",{attrs:{refreshDuration:e.refresh},on:{"update:refreshDuration":function(t){e.refresh=t},"update:refresh-duration":function(t){e.refresh=t},input:e.timeFilterChange,"on-refresh":e.timeFilterRefresh},model:{value:e.timeFilter,callback:function(t){e.timeFilter=t},expression:"timeFilter"}}),s("label",{staticClass:"ml-20"},[e._v(e._s(e.$t("session.Limit Count")))]),s("el-input-number",{staticClass:"ml-10",staticStyle:{width:"100px"},attrs:{placeholder:"查询条数",size:"small",min:5},on:{change:e.timeFilterRefresh},model:{value:e.limit,callback:function(t){e.limit=t},expression:"limit"}})],1)]),s("session-table",{attrs:{list:e.closeList}})],1)])],1)},i=[],a=s("a34a"),r=s.n(a),l=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-table",{attrs:{data:e.list.slice((e.currentPage-1)*e.pageSize,e.currentPage*e.pageSize),border:"",align:"center"}},[s("el-table-column",{attrs:{prop:"startTime","show-overflow-tooltip":"",label:e.$t("session.Query Start Time"),align:"center",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[s("span",[e._v(e._s(e._f("formatDate")(1e3*n.startTime)))])]}}])}),s("el-table-column",{attrs:{prop:"queryDuration","show-overflow-tooltip":"",label:e.$t("session.Query Duration"),width:"140",align:"center"}}),s("el-table-column",{attrs:{prop:"query","show-overflow-tooltip":"",label:e.$t("session.Query"),align:"center"}}),s("el-table-column",{attrs:{prop:"user","show-overflow-tooltip":"",label:e.$t("session.Initial User"),width:"120",align:"center"}}),s("el-table-column",{attrs:{prop:"queryId","show-overflow-tooltip":"",label:e.$t("session.Initial Query ID"),align:"center"}}),s("el-table-column",{attrs:{prop:"address","show-overflow-tooltip":"",label:e.$t("session.Initial Address"),align:"center"}}),s("el-table-column",{attrs:{prop:"threads","show-overflow-tooltip":"",label:e.$t("session.Thread Numbers"),width:"120",align:"center"}})],1),s("div",{staticClass:"text-center"},[e.list.length>0?s("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,20,40],"page-size":e.pageSize,layout:"sizes, prev, pager, next, jumper",total:e.list.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e()],1)],1)},o=[],c={props:{list:{type:Array,default:[]}},data:function(){return{currentPage:1,pageSize:10}},methods:{handleSizeChange:function(e){this.pageSize=e},handleCurrentChange:function(e){this.currentPage=e}},mounted:function(){},components:{}},u=c,p=s("2877"),f=Object(p["a"])(u,l,o,!1,null,null,null),h=f.exports,d=s("c949"),m=s("c281");function v(e,t,s,n,i,a,r){try{var l=e[a](r),o=l.value}catch(c){return void s(c)}l.done?t(o):Promise.resolve(o).then(n,i)}function b(e){return function(){var t=this,s=arguments;return new Promise((function(n,i){var a=e.apply(t,s);function r(e){v(a,n,i,r,l,"next",e)}function l(e){v(a,n,i,r,l,"throw",e)}r(void 0)}))}}var w={data:function(){return{id:"",refresh:null,openList:[],closeList:[],timeFilter:["now-7d","now"],limit:10}},created:function(){this.id=this.$route.params.id},mounted:function(){this.fetchData()},methods:{fetchData:function(){var e=this;return b(r.a.mark((function t(){var s,n,i;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=e.id,t.next=3,d["e"].open(s);case 3:n=t.sent,i=n.data.entity,e.openList=i,e.getSlowSessionList();case 7:case"end":return t.stop()}}),t)})))()},getSlowSessionList:function(){var e=this;return b(r.a.mark((function t(){var s,n,i,a,l,o,c;return r.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=Object(m["a"])(e.timeFilter),n=s.min,i=s.max,a=e.limit,l=e.id,t.next=4,d["e"].close(l,{limit:a,start:parseInt(n/1e3),end:parseInt(i/1e3)});case 4:o=t.sent,c=o.data.entity,e.closeList=c;case 7:case"end":return t.stop()}}),t)})))()},timeFilterRefresh:function(){this.getSlowSessionList()},timeFilterChange:function(){}},components:{SessionTable:h}},g=w,C=(s("ce2f"),Object(p["a"])(g,n,i,!1,null,"7a138d00",null));t["default"]=C.exports},fb6e:function(e,t,s){}}]);